version: 0.0.1
inputs:
  directories:
    - /gpfs/mnt/gpfs02/phenix/data_preservation/phnxreco/emcal/Pi0/test
  files:
    # - /gpfs/mnt/gpfs02/phenix/data_preservation/phnxreco/emcal/Pi0/middle/simPi0_0.root
    # - /gpfs/mnt/gpfs02/phenix/data_preservation/phnxreco/emcal/Pi0/middle/simPi0_1.root
    # - /gpfs/mnt/gpfs02/phenix/data_preservation/phnxreco/emcal/Pi0/middle/simPi0_2.root
    - ./driver.csh
    - ./setup_env.csh
    - timingDeadWarnRun16.txt
    - DeadWarnRun16.txt
    - pi0run.script
    - Pi0EmbedFiles.C
    - Pi0EmbedFiles.h
  parameters:
    arr: '1 2 3'
    # datafolder: '/gpfs/mnt/gpfs02/phenix/data_preservation/phnxreco/emcal/Pi0/'
workflow:
  type: serial
  specification:
    steps:
      - environment: 'registry.sdcc.bnl.gov/sdcc-fabric/rhic_sl7_ext:1.3'
        commands:
        - echo 'arr' $arr > output.txt
        - echo 'foreach i ( $arr )\n echo $i\n end' | tcsh
#        - chmod +x ./driver.csh
#        - mv gpfs/mnt/gpfs02/phenix/data_preservation/phnxreco/emcal/Pi0/middle/simPi0_0.root pi0_dAuMB.root
#        - rm -fr gpfs
        - ls -l gpfs >> output.txt
        - echo '--------------' >> output.txt
#        - ls -l pi0_dAuMB.root >> output.txt
#        - echo '-------------- before root' >> output.txt
#        - ./driver.csh >> output.txt
#        - echo 'AFTER ----------' >> output.txt
#        - ls -l  >> output.txt
outputs:
  files:
    - output.txt

#  directories:
#    - /gpfs/mnt/gpfs02/phenix/data_preservation/phnxreco/emcal/Pi0/middle